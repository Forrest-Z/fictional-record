# 20191208_愚公产品化分支测试说明

测试人：焦健

测试环境：测试场地3楼

测试版本信息见下【分支版本】

测试结果：

可以使用韩信对3楼的叉车进行调度，行驶平稳，但是看起来速度较慢，在小车进入伺服过程中，发生急停，但是之后移除障碍物以后，叉车不能正常伺服，navigator报轨迹偏离。在reset navigator的NSA以后，小车正常伺服。



## 1.切换版本操作说明

1）将单机的yugong_ws的文件夹名改为yugong_ws_back, yugong_ws_prod文件夹名改为yugong_ws。然后cd yugong_ws, source yugong_ws/devel/setup.bash.在新的yugong_ws里面的软件包的修改，正常编译即可。

2）将hanxin_ws的文件夹名改为hanxin_ws_back, hanxin_ws_prod文件夹名改为hanxin_ws.然后cd hanxin_ws, source hanxin_ws/devel/setup.bash.在新的hanxin_ws里面的软件包的修改，正常编译即可。

3) 将单机的开机启动项修改yugong_installer/start_up/lidar_forkllift_bootup.sh为yugong_installer/start_up/lidar_forkllift_bootup_backup.sh, yugong_installer/start_up/lidar_forkllift_bootup_prod.sh修改为yugong_installer/start_up/lidar_forkllift.sh.

4)重启韩信和愚公，其中愚公需要手动启动roslaunch cartographer_ros localization_with_velocyne_in_forklift.launch.

5)从韩信下发任务，如果不能动，可以手启动 roslaunch chassis chassis_node.launch.



## 2. 建议

1）web切换版本说明文档，方便各个组在进行不同版本测试的时候，快速切换版本。（海波）

2）chassis的log信息打印，存入到glog中，以及开机以后chassis一直被某个信号急停，直到手动启动chassis才正常。（江瑜）

3）LPP、NTT在进行伺服过程中，急停后恢复的时候，报偏离轨迹。（王好，刘会良）

4）reset performer无效，需要web组和隆谭联调。（隆谭，海波）

5) 需要SLAM组协助开机自启动VLP雷达经常不能启动的问题，以及把cartographer的定位自启加入自启动脚本中。（温从标）

6）请大家检查产品化软件版本，是否有误。

## 3. 分支版本

hanxin:

```
-----------------------------------------------------------------------------------------------------
----- Tool     : Version Check With Source ----------------------------------------------------------
----- Company  : Bito Robotics, Inc. ----------------------------------------------------------------
----- Package  : Bito Convenience -------------------------------------------------------------------
----- Command  : deploy package version-check with-source <package width> <branch width> <tag width> 
----- Developer: Dingjiang Zhou, Jian Jiao ----------------------------------------------------------
----- Date     : Aug 25th, 2019 ---------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------
Date and Time            Package or Repo                Branch                                   Tag                                      Commit                                   Commit Message                                     
2019-11-28 15:13:15      bito_common                    product_BITO_yugong                      JS_lidar_forklift_v.1.3.2-165-g088dadf   088dadfcc6be725d49c8e11756f2eb751b910cf4 add ipc status and lidar status Jin Dai (SH004)    
2019-12-03 20:30:43      charger                        dev_charger_new_interface                382429b                                  382429b59813a9499c930355e2b86e4a5ca81892 don't schedule charging directly after charging stxxxxxx
2019-12-05 16:57:03      commandor                      product_BITO_hanxin_v_2_1_0              before_fakeAgent_reject-162-g3e12e89     3e12e8919529c7aac08d12f68755c0b51a19c57a fix navigator crash                                
2019-11-21 14:54:24      factory_monitoring             dev_charger_new_interface                tag-a23-77-gb96f4a0                      b96f4a0f6d635dc2ad387c524a9191a6509d7b6b write dtc if nfs or charger died                   
2019-11-27 12:03:49      hanxin                         product_BITO_hanxin_v_2_1_0              1f4a589-dirty                            1f4a589186258504a11f6a59b785d16d43dc877a mwh: add nac in all_bringup.launch                 
2019-05-11 15:20:45      multi_master                   product_BITO_hanxin_v_2_1_0              JS_blue_ant_v.1.3.2-2-g7b0e922           7b0e9229f5277f068e1a2c162e1a1443ac254860 Merged in master_gpm (pull request #1)             
2019-11-26 13:33:34      navigator                      product_BITO_yugong                      f1.0_cancel_task-178-g2d46003            2d46003d933756b28468a5e9e83f4687a8e27bdf fix bug and add virtual_tasksimplex_multiline.launxxxxxx
2019-10-25 09:10:14      bito_http_api                  proj_JS_hanxin                           usun_stabe-190-gfc2f925                  fc2f9257754855a62198330d0d207fa4c6ec146a Merged in hotfix_to_fix_object_bug (pull request #xxxxxx
2019-07-31 08:09:36      bito_realtime_api              proj_JS_hanxin                           b66d145                                  b66d145df5d2e9a4869e125bf87ec5c31504f228 Merged in dev (pull request #2)                    
2019-10-09 17:56:55      hanxin_installer               proj_JS_hanxin                           JS_lidar_forklift_v.1.3.3-9-g6a66fae     6a66fae8b6413129dea4932859bc067df90f2e20 add charging to auto-start, Sai, SH007             
2019-10-08 15:26:52      hanxin_web                     product_BITO_hanxin_v_2_1_0              稼动率统计页面-1084-g3af890c                    3af890c8d9dd33cb069e5cb51f29d7c98239dfa7 Merge branch 'master' into product_BITO_hanxin_v_2xxxxxx
2019-09-24 06:14:12      ros_packages                   proj_JS_hanxin                           36df9cf                                  36df9cfca84feb1d39b4d6eb1d50387435a95969 Merged in master (pull request #12)                
2019-12-06 13:29:42      ros_service_rpc                product_BITO_hanxin_v_2_1_0              f246551                                  f2465515bc3ae62cb02588f4c3f51538d2bab28b update topic.py                                    
2019-09-23 11:21:26      deepsea-auto-charger-server    proj_JS_hanxin                           t-a25-37-g260f7df                        260f7dff04ed5c82df14e5606f921916ee92ee56 CHARGER DEVICE TIMER                               



-------------------------------------------------
-----------------git simple diff-----------------
-------------------------------------------------
bito_common 
charger 
commandor 
factory_monitoring 
hanxin diff --git a/hanxin/launch/master_discovery.launch b/hanxin/launch/master_discovery.launch
multi_master 
navigator 



-------------------------------------------------
------------git detailed local change------------
-------------------------------------------------
bito_common 
charger 
commandor 
factory_monitoring 
hanxin diff --git a/hanxin/launch/master_discovery.launch b/hanxin/launch/master_discovery.launch
index 9d43da3..ce22fb6 100644
--- a/hanxin/launch/master_discovery.launch
+++ b/hanxin/launch/master_discovery.launch
@@ -28,15 +28,15 @@
     <!-- in some network environments does multicast not work properly. In this
       case you can specify robots where a master discovery is running. These
       robots are pinged using unicast communication. -->
-    <rosparam param="robot_hosts">['bintong01']</rosparam>
+    <rosparam param="robot_hosts">['yg00a00019021816000n00']</rosparam>
     <!-- After the ROS master was changed the new state will be sent for
       `CHANGE_NOTIFICATION_COUNT` times (Default: 3 sec). The new state will be
       sent with `ROSMASTER_HZ` and only if `HEARTBEAT_HZ` is zero. -->
     <param name="change_notification_count" value="3" />
     <!-- disables the send of multicast messages.  -->
-    <param name="send_mcast" value="False" />
+    <param name="send_mcast" value="True" />
     <!-- disables the listening to multicast messages. If listen_mcast and send_mcast are False, only unicast socket will be created.  -->
-	<param name="listen_mcast" value="False" />
+	<param name="listen_mcast" value="True" />
 	<remap from="master_discovery/list_masters" to="/master_discovery/list_masters" />
   </node>
 </launch>
diff --git a/hanxin/param/action_tag.yaml b/hanxin/param/action_tag.yaml
index 4111945..b0f138a 100644
--- a/hanxin/param/action_tag.yaml
+++ b/hanxin/param/action_tag.yaml
@@ -1,199 +1,4 @@
 #the number of logical_action_tag
 /node_factory_server_2d/middle_tag_num: 0
 #format: [logical_action_end,logical_action_tag3,logical_action_tag2,logical_action_tag1,logical_action_start]
-# /node_factory_server_2d/all_logical_action_tag: [
-#   't_57','t_55',
-#   't_1','t_3',
-#   't_42','t_39',
-#   't_26','t_24']
-/node_factory_server_2d/all_logical_action_tag: [
-# 'B1', 'Y1',
-# 'B2', 'Y2',
-# 'B3', 'Y3',
-# 'B5', 'Y5',
-# 'B6', 'Y6',
-# 'B7', 'Y7',
-# 'B9', 'Y9',
-# 'B10', 'Y10',
-# 'B12', 'Y12',
-# 'B13', 'Y13',
-# 'B14', 'Y14',
-# 'B15', 'Y15',
-# 'B16', 'Y16',
-# # 'B17', 'H7',
-# 'B18', 'Y18',
-# 'B19', 'Y19',
-# 'B20', 'Y20',
-# 'B21', 'Y21',
-# # 'B22', 'Y22',
-# 'B23', 'Y23',
-# 'B24', 'Y24',
-# 'B25', 'Y25',
-# 'B26', 'Y26',
-# 'B27', 'Y27',
-# 'B28', 'X28',
-# # 'B30', 'H3',
-# 'B31', 'X31',
-# 'A21', 'X21',
-# 'A22', 'X22',
-# 'A23', 'X23',
-# 'A24', 'X24',
-# 'A25', 'X25',
-# 'A26', 'X26',
-# 'A27', 'S3',
-# 'A35', 'X35',
-# 'A36', 'X36',
-# 'A37', 'X37',
-# 'A38', 'X38',
-# 'A39', 'X39',
-# 'A40', 'S2',
-# 'A48', 'X48',
-# 'A49', 'X49',
-# 'A50', 'X50',
-# 'A51', 'X51',
-# 'A52', 'X52',
-# 'A53', 'X53',
-# 'A54', 'S1',
-# 'A1', 'X8',
-# 'A2', 'X9',
-# 'A3', 'X10',
-# 'A4', 'X11',
-# 'A5', 'X12',
-# 'A6', 'X13',
-# 'A7', 'S4',
-# 'A8', 'X8', 
-# 'A9', 'X9', 
-# 'A10', 'X10',
-# 'A11', 'X11',
-# 'A12', 'X12',
-# 'A13', 'X13',
-# 'A14', 'S4',
-# 'A15', 'X21',
-# 'A16', 'X22',
-# 'A17', 'X23',
-# 'A18', 'X25',
-# 'A19', 'X26',
-# 'A20', 'S3',
-# 'A28', 'X35',
-# 'A29', 'X36',
-# 'A30', 'X37',
-# 'A32', 'X38',
-# 'A33', 'X39',
-# 'A34', 'S2',
-# 'A41', 'X48',
-# 'A42', 'X49',
-# 'A43', 'X50',
-# 'A44', 'X51',
-# 'A45', 'X52',
-# 'A46', 'X53',
-# 'A47', 'S1']
-# # 'B17', 'H7',
-'t_196', 't_182',
-'t_210', 't_182',
-'t_194', 't_180',
-'t_208', 't_180',
-'t_192', 't_178',
-'t_206', 't_178',
-'t_190', 't_176',
-'t_204', 't_176',
-'t_188', 't_174',
-'t_202', 't_174',
-'t_186', 't_172',
-'t_200', 't_172',
-'t_184', 't_170',
-'t_198', 't_170',
-#################
-'t_236', 't_224',
-'t_250', 't_224',
-'t_234', 't_222',
-'t_248', 't_222',
-'t_232', 't_220',
-'t_246', 't_220',
-'t_244', 't_218',
-'t_230', 't_216',
-'t_242', 't_216',
-'t_228', 't_214',
-'t_240', 't_214',
-'t_226', 't_212',
-'t_238', 't_212',
-#################
-'t_278', 't_264',
-'t_290', 't_264',
-'t_276', 't_262',
-'t_288', 't_262',
-'t_274', 't_260',
-'t_286', 't_260',
-'t_272', 't_258',
-'t_270', 't_256',
-'t_284', 't_256',
-'t_268', 't_254',
-'t_282', 't_254',
-'t_266', 't_252',
-'t_280', 't_252',
-#################
-'t_318', 't_304',
-'t_332', 't_304',
-'t_316', 't_302',
-'t_330', 't_302',
-'t_314', 't_300',
-'t_328', 't_300',
-'t_312', 't_298',
-'t_326', 't_298',
-'t_310', 't_296',
-'t_324', 't_296',
-'t_308', 't_294',
-'t_322', 't_294',
-'t_306', 't_292',
-'t_320', 't_292',
-#################
-'t_352', 't_53',
-'t_350', 't_51',
-'t_348', 't_49',
-'t_346', 't_47',
-'t_344', 't_45',
-'t_342', 't_43',
-'t_340', 't_41',
-'t_338', 't_39',
-'t_336', 't_37',
-'t_334', 't_33',
-################
-'t_386', 't_91',
-#'t_388', 't_93',
-'t_390', 't_103',
-#'t_392', 't_105',
-################
-'t_602', 't_527',
-'t_600', 't_525',
-'t_368', 't_71',
-'t_366', 't_69',
-'t_364', 't_67',
-'t_362', 't_65',
-'t_360', 't_63',
-'t_358', 't_61',
-'t_356', 't_59',
-'t_354', 't_57',
-################
-'t_676', 't_589',
-'t_678', 't_591',
-'t_370', 't_73',
-'t_372', 't_75',
-'t_374', 't_77',
-'t_376', 't_79',
-'t_378', 't_81',
-#'t_380', 't_83',
-'t_382', 't_85',
-'t_384', 't_87',
-################
-'t_464', 't_420',
-'t_461', 't_417',
-'t_458', 't_414',
-'t_455', 't_411',
-'t_452', 't_409',
-'t_449', 't_406',
-################
-'t_165', 't_1',
-'t_167', 't_3'
-]
-/node_factory_server_2d/relation_node_id: [ 
-1000, 449, 448
-]
+/node_factory_server_2d/all_logical_action_tag: []
diff --git a/hanxin/param/auto_charging.yaml b/hanxin/param/auto_charging.yaml
index 8841fbd..140de7b 100644
--- a/hanxin/param/auto_charging.yaml
+++ b/hanxin/param/auto_charging.yaml
@@ -1,18 +1,28 @@
-# If true, automatically assign a charging task to a low battery robot.
-general/automatic_mode: false
-# If a robot battery percentag is under this threshold, and automatic mode is on, the robot will be assigned a charging task.
-battery_level/battery_percentage_emergency_threshold: 70.0
-# minimum charging time in seconds before the task can be interrupted
-general/minimum_charging_time_seconds: 100
-# 
-general/waiting_time_before_charging: 5
-# minimum time to wait before the charging station is considered broken down.
-general/waiting_time_before_breakdown: 20
-# keep preassigned_agents as true if you want agents to be preassigned stations
-general/preassigned_agents: false
-# if preassigned is true, fill up the mapping as list of pairs
-# [station ID, agent ID].
-# For example: it can be [] or [[1, "yg***1"], [1, "yg***2"]]
-# or [[1, "yg***1"], [2, "yg***2"]]
-# data/charging_station_agent_mapping: [[1, "yg00t11019032017300n01"], [2, "yg00t11019032017300n02"]]
-data/charging_station_agent_mapping: [] #[[1, "yg00sim018042309000n00"], [2, "yg00sim018042309000n01"], [3, "yg00sim018042309000n02"], [4, "yg00sim018042309000n03"]]
+#
+general/automatic_mode: true
+#
+battery_level/full_battery_level: 100.0
+# using the charing current as the one of 
+# judgment condition of bms interruption.
+# unit: 0.1A, please input a int.
+battery_level/full_battery_stop_current: 200
+#
+battery_level/charging_interruption_allowed: 40.0
+#
+battery_level/no_new_task: 20.0
+#
+battery_level/no_auto_charging_task: 85.0
+#
+general/waiting_time_before_interrupting_charging: 5
+#
+general/waiting_time_before_charging: 20
+#
+general/waiting_time_after_interrupting_charging: 10
+# while the agent battery level is below 40%, if charging time meet this limitation of charging time, 
+# we could interrupt charging to avoid bms could not feedback correct real battery level.
+# only work for lead-acid batteries (charging mode == 2) & (gpm @todo)
+general/minimum_charging_time_seconds: 60
+# because of bms shortage of lead-acid, we cannot get correct battery level while charging.
+# use this param to limit charging time in case of safety.
+# default maximum charging time is 8h, at least 1 min.
+general/maximum_charging_time_seconds: 28800
diff --git a/hanxin/param/auto_homing.yaml b/hanxin/param/auto_homing.yaml
index f948260..76ae8d1 100644
--- a/hanxin/param/auto_homing.yaml
+++ b/hanxin/param/auto_homing.yaml
@@ -1,9 +1,29 @@
 #format: ['serial','safe point 1',....]
+# /node_factory_server_2d/homing_point: [
+#   'yg00t11019032017300n00','t_26',
+#   'yg00t11019032017300n02','t_42',
+#   'yg00t11019032017300n03','t_1']
 
+# /node_factory_server_2d/homing_point: [
+#   'yg00t11019032017300n01','t_1',
+#   'yg00t11019032017300n02','t_42',
+#   'yg00t11019032017300n03','t_26']
+
+
+
+# /node_factory_server_2d/homing_point: {
+#   "yg00sim018042309000n03" : ["A1", "A2"]
+# }
 /node_factory_server_2d/homing_point: [
-   'yg00virt19072214000n00','t_71','t_83','t_59','t_39','t_15','t_7',
-   'yg00virt19072214000n01','t_71','t_83','t_59','t_39','t_15','t_7',
-   'yg00virt19072214000n02','t_71','t_83','t_59','t_39','t_15','t_7'
-  ]
+  'yg00a00019021816000n00','S1','S4',
+  'yg00a00019071017000n00','S1','S4'
+  # 'yg00sim018042309000n00','t_71','t_83','t_59','t_95','t_39','t_15','t_7','t_428',
+  #'yg00sim018042309000n01','t_71','t_83','t_59','t_95','t_39','t_15','t_7','t_428',
+  #'yg00sim018042309000n02','t_71','t_83','t_59','t_95','t_39','t_15','t_7','t_428',
+  #'yg00sim018042309000n03','t_71','t_83','t_59','t_95','t_39','t_15','t_7','t_428'
 
-/node_factory_server_2d/skip_homing_goal: []
+  # 'yg00sim018042309000n00','H1','H2','H3','H4','H5','H6','H7','H8',
+  # 'yg00sim018042309000n01','H1','H2','H3','H4','H5','H6','H7','H8',
+  # 'yg00sim018042309000n02','H1','H2','H3','H4','H5','H6','H7','H8',
+  # 'yg00sim018042309000n03','H1','H2','H3','H4','H5','H6','H7','H8'
+]
diff --git a/hanxin/param/commandor_ros.yaml b/hanxin/param/commandor_ros.yaml
index add3951..a6f8e05 100644
--- a/hanxin/param/commandor_ros.yaml
+++ b/hanxin/param/commandor_ros.yaml
@@ -9,9 +9,9 @@
 #
 /node_factory_server_2d/near_threshold_y: 1.2
 #
-/node_factory_server_2d/near_threshold_theta: 3.3
+/node_factory_server_2d/near_threshold_theta: 1.2
 # For GPM friends, change this param to 50 to avoid tracking error. Change back to 5 if this problem is fixed.
-/node_factory_server_2d/forward_coordination_horizon: 5
+/node_factory_server_2d/forward_coordination_horizon: 4
 #
 /node_factory_server_2d/global_plan_pipe_options_2d/global_lattice_sizes_x: 200
 #
@@ -36,28 +36,55 @@
 /node_factory_server_2d/trajectorizer_options/add_zero_padding: true
 #
 /node_factory_server_2d/trajectorizer_options/use_acceleration: true
-#
-/node_factory_server_2d/max_unscheduled_tasks: 5
-#
+# max number of CREATED tasks(with regular priority) that will be grabbed 
+# when schedule new tasks to agents
+/node_factory_server_2d/max_unscheduled_tasks: 101
+# After a task is done, if a robot will go back home
+#    0 = auto homing off
+#    >0 = auto homing on
+#    1(Invalid now) = read home assignment from database, fixed assignment
+#    2 = auto compute dead-end, assign by nearest non-dead-end locations
+#       by euclidean distance
+#    3(Invalid now) = auto compute dead-end, assign by nearest non-dead-end locations
+#        by BFS (Not Implemented, TODO)
+#    4 = manual config by yaml, read from yaml, assign by nearest location in yaml by
+#       euclidean distance.
+#    5 = manual config by yaml, read from yaml, assign by 2nd nearest location in yaml
+#       by euclidean distance.
 /node_factory_server_2d/auto_homing_mode: 0
-#
+# When assign task, should we consider robot's capability, e.g. forklift and blue-ant
+# have different capability set. 
+# If we have homogeneous agent in a system, this should be false.
 /node_factory_server_2d/capability_management: false
-#
+# If we want to use task priority. 0 means when assign task, 
+# we do not consider task's priority
 /node_factory_server_2d/priority_mode: 1
-#
+# If a robot A stopped at some place on a road and another robot B want to pass through.
+#    0 = Robot A will not move.
+#    >0 = Robot A will move away to let Robot B to pass.
+#    1 = read resolve_points from yaml, find the 2nd nearest location in the yaml
+#        for Robot A.
+#    2 = read resolve_points from yaml, randomly find a location besides the 
+#        current location of Robot A. 
 /node_factory_server_2d/resolve_blockage_mode: 0
-# 0 = multi-agent send to one topic; 1 = multi-master api;
+# How does robots send their agent_task_feedback to NFS
+# 0 = multi-agent send to one topic; 
+# 1 = each robot send to separate topic;
 /node_factory_server_2d/feedback_receiving_mode: 1
-#
+# If we handle deadlock.
+# 0 = No deadlock detection, no handling
+# 1 = Try to resolve deadlock if detected
 /node_factory_server_2d/deadlock_handling_mode: 0
 #
-/node_factory_server_2d/task_decomposition_mode: true
+/node_factory_server_2d/task_decomposition_mode: false
 #gpm mode
 /node_factory_server_2d/gpm_mode: false
-# #
-/node_factory_server_2d/customized_mode : ""
-# /node_factory_server_2d/avoidance_area: []
 
-/node_factory_server_2d/avoidance_area: []
+/node_factory_server_2d/customized_mode: ""
+# If resolve_blockage_mode is 1, then this param is valid.
+# This vector defines the logical positions that can be used as avoidance point
+# to support blockage resolving.
+/node_factory_server_2d/avoidance_area: ["H1", "H6", "H7"]
 
-/node_factory_server_2d/send_ts_in_advance: false
+#send TS in advance
+/node_factory_server_2d/send_ts_in_advance: true
diff --git a/hanxin/param/dynamic_obst_conf.yaml b/hanxin/param/dynamic_obst_conf.yaml
index 803373f..93d6130 100644
--- a/hanxin/param/dynamic_obst_conf.yaml
+++ b/hanxin/param/dynamic_obst_conf.yaml
@@ -1,14 +1,14 @@
 # 配置tag避障属性
 tag_obst: 
  -
-  roadmap_node_id: 41 # 需调节避障距离对应的路网节点ID
+  roadmap_node_id: 8 # 需调节避障距离对应的路网节点ID
+  obst_mode: 3
+ -
+  roadmap_node_id: 9 
   obst_mode: 1
  -
-  roadmap_node_id: 47 
+  roadmap_node_id: 10
   obst_mode: 2
  -
-  roadmap_node_id: 55
-  obst_mode: 3
- -
-  roadmap_node_id: 63
-  obst_mode: 4
+  roadmap_node_id: 11
+  obst_mode: 2
diff --git a/hanxin/param/factory_ware.yaml b/hanxin/param/factory_ware.yaml
old mode 100644
new mode 100755
diff --git a/hanxin/param/node_global_replan_manager.yaml b/hanxin/param/node_global_replan_manager.yaml
deleted file mode 100644
index 1f7acdd..0000000
--- a/hanxin/param/node_global_replan_manager.yaml
+++ /dev/null
@@ -1,18 +0,0 @@
-# number of doors
-num_doors: 2
-# # door 0 [door0 node id, in door0 node id, out door0 node id]
-# door0: [443, 422, 445]
-# # door 1 [door1 node id, in door1 node id, out door1 node id]
-# door1: [406, 409, 115]
-
-# door 0 [door0 node id, in door0 node id, out door0 node id]
-door0: [443, 422, 445]
-# door 1 [door1 node id, in door1 node id, out door1 node id]
-door1: [406, 409, 115, 10527, 10526, 10528, 10529]
-
-# timeout seconds before a closed door is considered reopened. Time is in seconds
-timeout_seconds: 15 
-# timeout seconds that a robot waits in front of a closed door. Time is in seconds
-waiting_time_in_front_of_a_door_seconds: 2
-# debug mode
-debug_mode: true
diff --git a/hanxin/param/safe_area.yaml b/hanxin/param/safe_area.yaml
index 31649ce..9d8e0b4 100644
--- a/hanxin/param/safe_area.yaml
+++ b/hanxin/param/safe_area.yaml
@@ -1,7 +1,7 @@
 #format: [safe_point1,safe_point2,safe_point3,...]
-
 /node_factory_server_2d/safe_area: [
+#'t_182','t_222','t_264','t_304'
 ]
-
+# /node_factory_server_2d/safe_area: ['S1','S2','S3','S4']
 #auto or manual
-/node_factory_server_2d/manual_resume_mode: true
+/node_factory_server_2d/manual_resume_mode: false
diff --git a/hanxin/param/storage_manager.yaml b/hanxin/param/storage_manager.yaml
old mode 100644
new mode 100755
multi_master 
navigator 

```

yugong:

```
-----------------------------------------------------------------------------------------------------
----- Tool     : Version Check With Source ----------------------------------------------------------
----- Company  : Bito Robotics, Inc. ----------------------------------------------------------------
----- Package  : Bito Convenience -------------------------------------------------------------------
----- Command  : deploy package version-check with-source <package width> <branch width> <tag width> 
----- Developer: Dingjiang Zhou, Jian Jiao ----------------------------------------------------------
----- Date     : Aug 25th, 2019 ---------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------
Date and Time            Package or Repo                Branch                                   Tag                                      Commit                                   Commit Message                                     
2019-11-28 16:47:25      agent_monitoring               product_BITO_yugong                      JS_lidar_forklift_v.1.3.2-127-g26a0c70   26a0c7096387f2510bb7711fff753576c3155aff unify executable filename Jin(SH004)               
2019-08-21 12:17:34      bg_test                        dev                                      0bfeab0-dirty                            0bfeab0b6ca8b5b645ab10c3feb68bf9d47907f8 Add high cpu and memory test                       
2019-11-28 15:13:15      bito_common                    product_BITO_yugong                      JS_lidar_forklift_v.1.3.2-165-g088dadf   088dadfcc6be725d49c8e11756f2eb751b910cf4 add ipc status and lidar status Jin Dai (SH004)    
2019-09-23 13:32:24      calibrator                     proj_JS_lidar_forklift                   JS_blue_ant_v.1.3.2-18-gca18465          ca184657c5efaed75725255f1baaebb84a7d8d64 Merged in testgit (pull request #11)               
2019-11-19 16:25:52      camera_driver                  product_BITO_yugong                      JS_blue_ant_v.1.3.2-4-g4e5bb6a           4e5bb6aa002fd563001a5ee3862c7df00d89f8ef Merge branch 'master_JS_lidar_forklift' into produxxxxxx
2019-11-19 15:05:38      camera_stream                  product_BITO_yugong                      JS_lidar_forklift_v.1.3.2-7-gb454524     b45452459093c5c1503d77a306d0491cdff515c9 fix a compile issue Jin Dai (SH004)                
2019-10-09 04:03:01      cartographer_ros               proj_JS_lidar_forklift                   JS_lidar_forklift_v.1.3.2-39-g34fbf57    34fbf5706493637f179a03878e2e9f2c8a894fc4 Merged in proj_JS_lidar_forklift_pose_compensate (xxxxxx
2019-11-27 21:22:48      chassis                        dev                                      908af83-dirty                            908af83cb8cc55f09bc871bbf26b1d8851187ea9 add CurtisBms                                      
2019-11-15 18:56:40      deploy_tool                    product_BITO_yugong                      JS_blue_ant_v.1.3.2-10-g6bfd19b          6bfd19b39da17be83fe352f468a70d722f3d9c4b compatible msg1.0 2.0                              
2018-08-02 17:25:07      ethzasl_xsens_driver           master                                   2.2.2-dirty                              d0cc2b523204c77ddb319d417e908ab2652e90ef 2.2.2                                              
2019-11-19 14:56:43      joystick_control               product_BITO_yugong                      JS_blue_ant_v.1.3.2-10-g45ea77c          45ea77ccb9746096c0e008ee82224251ed13decb Merge branch 'product_yang_3847' into product_BITOxxxxxx
                         lidarcalibration                                                                                                                                                                                             
2019-01-17 03:57:30      localizer                      proj_JS_lidar_forklift                   JS_lidar_forklift_v.1.3.2                44e5f604bf24a2835e7e1ded896d62a114896ce4 Merged in add_log (pull request #2)                
2018-08-13 01:56:45      multi_master                   proj_JS_lidar_forklift                   JS_blue_ant_v.1.3.2                      e48ccd60bbea7b8857b5a2641e80106715830fd3 Merge branch 'kinetic-devel' of https://github.comxxxxxx
2019-12-05 17:58:57      navigator                      product_BITO_yugong_fix                  f1.0_cancel_task-194-g6493d4e-dirty      6493d4effedea2143ed89ec36d5cf7519a32d373 fix bug for 2136                                   
2019-07-13 12:17:01      object_detector                proj_JS_lidar_forklift                   JS_blue_ant_v.1.3.2-1-g7906f17           7906f1705d5d2a07266498ed212d35df41964d7e delete cache files                                 
                         pepperl_fuchs_r2000                                                                                                                                                                                          
2019-09-23 13:42:11      perceptron                     proj_JS_lidar_forklift                   JS_lidar_forklift_v.1.3.2-3-g41375de     41375de015e503878bdd294bed1a4fe891dcb6c3 Merged in testgit (pull request #21)               
2019-11-25 13:23:09      performer                      product_BITO_yugong                      JS_blue_ant_v.1.3.2-235-g8267054-dirty   8267054fd1e9fff24f2d08f9eb0e577876aa20b2 solve conflicts. Longtan,SH036                     
2019-09-27 10:01:18      robot_localization             proj_JS_lidar_forklift                   tag-a23-3-gde05c58-dirty                 de05c582c3069f73fab406841e026521554c31f9 Merged in proj_JS_lidar_forklift_git_version (pullxxxxxx
2019-04-26 14:14:16      sick_scan                      proj_JS_lidar_forklift                   JS_lidar_forklift_v.1.3.2-dirty          b086034cf967124d42779c6139331f21ea2f7daa Merged in dev (pull request #7)                    
2019-07-13 12:27:58      tag_slam                       proj_JS_lidar_forklift                   JS_blue_ant_v.1.3.2-8-g68f97c1           68f97c121fbab0af83aac90cd0a38b5a832854e5 delete cache file                                  
2019-11-19 15:27:14      velodyne                       product_BITO_yugong                      JS_lidar_forklift_v.1.3.2-2-g1214027     121402773c0a58afdc6a78af01f5ad61f0115d63 fix compile issue Jin Dai(SH004)                   
2019-08-12 04:41:40      yugong                         proj_JS_lidar_forklift                   a01-19-g26b744f-dirty                    26b744f707aa2a3ae61c88fc2c8569b7de293214 initial commit for new branch                      
2019-02-25 05:05:19      yugong_descriptions            proj_JS_lidar_forklift                   JS_blue_ant_v.1.3.2                      8be90de7c4af740cb69d4412571c40e781e88df2 Merged in velodyne (pull request #1)               
2019-08-12 19:08:25      yugong_installer               proj_JS_lidar_forklift                   JS_lidar_forklift_v.1.3.2-2-g01cd6d8     01cd6d8a4b7366b2a11f32d0b973d186899db789 change script                                      
2019-03-27 08:17:43      yugong_web                     proj_JS_lidar_forklift                   JS_blue_ant_v.1.3.2                      a6e821f3f5c4ec3b6dbd6ce1924bfacefbce7a38 Merged in alpha (pull request #2)                  
2019-09-27 11:56:55      system_ws/cartographer         proj_JS_lidar_forklift                   JS_lidar_forklift_v.1.3.2-14-gd583818    d5838184699d8406b1abf493c3026a0a823a2716 Merged in proj_JS_lidar_forklift_sensor_cache_optixxxxxx



-------------------------------------------------
-----------------git simple diff-----------------
-------------------------------------------------
agent_monitoring 
bg_test diff --git a/pressure_test/CMakeLists.txt b/pressure_test/CMakeLists.txt
bito_common 
calibrator 
camera_driver 
camera_stream 
cartographer_ros 
chassis diff --git a/src/Motion.cpp b/src/Motion.cpp
deploy_tool 
ethzasl_xsens_driver diff --git a/launch/xsens_driver.launch b/launch/xsens_driver.launch
joystick_control 
lidarcalibration 
localizer 
multi_master 
navigator diff --git a/navigator_ros/CMakeLists.txt b/navigator_ros/CMakeLists.txt
object_detector 
pepperl_fuchs_r2000 
perceptron 
performer diff --git a/performer_ros/launch/performer_ros.launch b/performer_ros/launch/performer_ros.launch
robot_localization diff --git a/robot_localization/test/test1.bag b/robot_localization/test/test1.bag
sick_scan diff --git a/example_bags/2018-06-07-03-58-52.bag b/example_bags/2018-06-07-03-58-52.bag
tag_slam 
velodyne 
yugong diff --git a/yugong/data/object_model/reflectors.json b/yugong/data/object_model/reflectors.json
yugong_descriptions 



-------------------------------------------------
------------git detailed local change------------
-------------------------------------------------
agent_monitoring 
bg_test diff --git a/pressure_test/CMakeLists.txt b/pressure_test/CMakeLists.txt
index acc1838..0e4133c 100644
--- a/pressure_test/CMakeLists.txt
+++ b/pressure_test/CMakeLists.txt
@@ -28,12 +28,10 @@ find_package(Gflags)
 set(CMAKE_CXX_FLAGS "-std=c++0x ${CMAKE_CXX_FLAGS}")
 
 catkin_package(
-  INCLUDE_DIRS include
   DEPENDS system_lib Eigen
 )
 
 include_directories(DIRECTORY
-  include
   include/pressure_msgs
   ${catkin_INCLUDE_DIRS}
   ${EIGEN3_INCLUDE_DIRS}
bito_common 
calibrator 
camera_driver 
camera_stream 
cartographer_ros 
chassis diff --git a/src/Motion.cpp b/src/Motion.cpp
index 38ce922..3f7efdf 100644
--- a/src/Motion.cpp
+++ b/src/Motion.cpp
@@ -287,6 +287,8 @@ bool Motion::Srv_Callback_Reset_Odom(bito_msgs::ResetSrv::Request &req,bito_msgs
 bool Motion::Srv_Callback_Stop(bito_msgs::SwitchStateSrv::Request &req,bito_msgs::SwitchStateSrv::Response &res) 
 {
   static std::vector<std::string> soft_estop_vec_;
+  std::cout << "=========================" << std::endl;
+  std::cout << "command = " << req.command << std::endl;
   switch (req.command) {
   case 1: 
      LOG(INFO) << "TCN-CSS stop mobile base (send zero speed)";
@@ -334,4 +336,4 @@ bool Motion::Srv_Callback_Stop(bito_msgs::SwitchStateSrv::Request &req,bito_msgs
   }
   res.state_id = 1;
   return true;
-}
\ No newline at end of file
+}
deploy_tool 
ethzasl_xsens_driver diff --git a/launch/xsens_driver.launch b/launch/xsens_driver.launch
index c0478f5..9f46b2c 100644
--- a/launch/xsens_driver.launch
+++ b/launch/xsens_driver.launch
@@ -1,10 +1,12 @@
 <launch>
     <!-- parameters -->
+    <arg name="robot_name" default="$(env HOSTNAME)"/>
+    <group ns="/$(arg robot_name)">
     <arg name="device" default="auto" doc="device file of the IMU"/>
     <arg name="baudrate" default="0" doc="baudrate of the IMU"/>
     <arg name="timeout" default="0.002" doc="timeout for the IMU communication"/>
     <arg name="initial_wait" default="0.1" doc="initial wait to allow device to come up"/>
-    <arg name="frame_id" default="/imu" doc="frame id of the IMU"/>
+    <arg name="frame_id" default="$(arg robot_name)/imu_link" doc="frame id of the IMU"/>
     <arg name="frame_local" default="ENU" doc="desired frame orientation (ENU, NED or NWU)"/>
     <arg name="no_rotation_duration" default="0" doc="duration (int in seconds) of the no-rotation calibration procedure"/>
     <arg name="angular_velocity_covariance_diagonal" default="[0.0004, 0.0004, 0.0004]" doc="Diagonal elements of angular velocity covariance matrix"/>
@@ -24,4 +26,5 @@
 		<rosparam param="linear_acceleration_covariance_diagonal" subst_value="True">$(arg linear_acceleration_covariance_diagonal)</rosparam>
 		<rosparam param="orientation_covariance_diagonal" subst_value="True">$(arg orientation_covariance_diagonal)</rosparam>
 	</node>
+    </group>
 </launch>
joystick_control 
lidarcalibration 
localizer 
multi_master 
navigator diff --git a/navigator_ros/CMakeLists.txt b/navigator_ros/CMakeLists.txt
index 4a6f0d7..059a35a 100644
--- a/navigator_ros/CMakeLists.txt
+++ b/navigator_ros/CMakeLists.txt
@@ -292,7 +292,7 @@ endforeach(func_node_cpp ${ALL_FUNC_NODES})
 
 #### tool nodes ####BUILD_TOOLNODE
 message(STATUS "BUILD_TOOLNODE OPTION SET TO : ${BUILD_TOOLNODE}")
-if(${BUILD_TOOLNODE})
+if(True)
   file(GLOB_RECURSE ALL_TOOL_NODES "src/tool_node/*.cpp")
   message(STATUS "ALL_TOOL_NODES " : ${ALL_TOOL_NODES})
   foreach(tool_node_cpp ${ALL_TOOL_NODES})
diff --git a/navigator_ros/launch/composite_launch/lidar_forklift_navigator_ros.launch b/navigator_ros/launch/composite_launch/lidar_forklift_navigator_ros.launch
index ae70900..dec5499 100644
--- a/navigator_ros/launch/composite_launch/lidar_forklift_navigator_ros.launch
+++ b/navigator_ros/launch/composite_launch/lidar_forklift_navigator_ros.launch
@@ -3,7 +3,7 @@
 	<arg name="agent_serial" default="$(env HOSTNAME)"/>
 	<arg name="repo_name" default="yugong"/>
 	<arg name="robot_type" default="lidar_forklift"/>
-	<arg name="deploy_dir" default="$(env ROS_HOME)/../$(arg repo_name)_ws/src/$(arg repo_name)/$(arg repo_name)"/>
+	<arg name="deploy_dir" default="$(env ROS_HOME)/../$(arg repo_name)_ws_prod/src/$(arg repo_name)/$(arg repo_name)"/>
 	<arg name="use_sim_time" default="false"/>
 	<param name="/use_sim_time" value="$(arg use_sim_time)"/>
 
@@ -24,4 +24,4 @@
 
 	<!-- <include file="$(find navigator_ros)/launch/tool_launch/tool_fake_sick_tim_310.launch"/> -->
 
-</launch>
\ No newline at end of file
+</launch>
diff --git a/navigator_ros/launch/tool_launch/tool_tasksimplex_singleline.launch b/navigator_ros/launch/tool_launch/tool_tasksimplex_singleline.launch
index 50bb149..a69d871 100644
--- a/navigator_ros/launch/tool_launch/tool_tasksimplex_singleline.launch
+++ b/navigator_ros/launch/tool_launch/tool_tasksimplex_singleline.launch
@@ -10,7 +10,7 @@
 	<group>
 		<!-- <arg name="agent_serial" value="yg00b10018042309000n00" /> -->
 		<arg name="agent_serial" default="$(env HOSTNAME)"/> 
-		<arg name="distance" default="3.0"/>
+		<arg name="distance" default="-2.0"/>
 		<node name="tool_task_simplex_singleline_2d" pkg="navigator_ros" type="tool_task_simplex_singleline_2d"  args=" $(arg distance) 0 0" output="screen">
 			<!-- 1:cube 8,16 2:triangle 15,16 3:lift: up 4: lift down 5: back to 13,16 -->
 			<rosparam param = "/robot_name" subst_value="True">"$(arg agent_serial)"</rosparam>
diff --git a/navigator_ros/launch/tool_launch/virtual_tasksimplex_singleline.launch b/navigator_ros/launch/tool_launch/virtual_tasksimplex_singleline.launch
index 9f82a36..e907c43 100644
--- a/navigator_ros/launch/tool_launch/virtual_tasksimplex_singleline.launch
+++ b/navigator_ros/launch/tool_launch/virtual_tasksimplex_singleline.launch
@@ -8,9 +8,9 @@
 	<!-- ### run nodes ### -->
 	<!-- <node name="node_start_picking_server" pkg="fork_control" type="node_start_picking_server" output="screen"/> -->
 	<group>
-		<arg name="agent_serial" value="yg00b10018042309000n00" />
+		<arg name="agent_serial" value="yg00a00019021816000n00" />
 		<!-- <arg name="agent_serial" default="$(env HOSTNAME)"/>  -->
-		<arg name="distance" default="5"/>
+		<arg name="distance" default="-0.5"/>
 		<node name="tool_task_simplex_singleline_2d" pkg="navigator_ros" type="tool_task_simplex_singleline_2d"  args=" $(arg distance) 0 0" output="screen">
 			<!-- 1:cube 8,16 2:triangle 15,16 3:lift: up 4: lift down 5: back to 13,16 -->
 			<rosparam param = "/robot_name" subst_value="True">"$(arg agent_serial)"</rosparam>
diff --git a/navigator_ros/src/function_node/node_local_plan_pipe_2d_new.cpp b/navigator_ros/src/function_node/node_local_plan_pipe_2d_new.cpp
index 817a31e..16fa379 100644
--- a/navigator_ros/src/function_node/node_local_plan_pipe_2d_new.cpp
+++ b/navigator_ros/src/function_node/node_local_plan_pipe_2d_new.cpp
@@ -38,8 +38,8 @@ int NodeLocalPlanPipe2d<Trajectorizer>::InitializeParameters(){
   local_plan_pipe_state_->current_trajectory_index = -1;
   local_plan_pipe_state_->last_trajectory_id=-1;
   local_plan_pipe_state_->replan_flag=false;
-  local_plan_pipe_state_->gloca_timeout=true;
-  local_plan_pipe_state_->cloud_timeout=true;
+  local_plan_pipe_state_->gloca_timeout=false;
+  local_plan_pipe_state_->cloud_timeout=false;
   local_plan_pipe_state_->deviation_pause_called=false;
   trajectory_feedback_->nav_hand_over_state = 0;
   local_plan_pipe_state_->trajectory_done=false;
@@ -456,6 +456,7 @@ void NodeLocalPlanPipe2d<Trajectorizer>::CallbackReceivePerformVel(const bito_ms
     return;
   } else if (base_cmd.source.compare("performer") == 0) {
     perform_end_vel_x = base_cmd.twist.linear.x;
+    LOG(INFO)<<"perform_end_vel_x ="<<perform_end_vel_x;
   }
   return;
 };
diff --git a/navigator_ros/src/function_node/node_simple_agent_2d_new.cpp b/navigator_ros/src/function_node/node_simple_agent_2d_new.cpp
index 5bcc0c2..ab092ef 100644
--- a/navigator_ros/src/function_node/node_simple_agent_2d_new.cpp
+++ b/navigator_ros/src/function_node/node_simple_agent_2d_new.cpp
@@ -297,6 +297,7 @@ namespace navigator_ros{
               && (agent_original_task_simplex_->task_trajectory.points.size() > 0)){
             if( in->nav_hand_over_state == 1){
 		 ResetNodeLocalPlanPipe();
+                LOG(INFO)<<"reset LLP"<<std::endl;
 	    }
             double error_dist, error_theta;
             auto destination_point=agent_original_task_simplex_->destination;
diff --git a/navigator_ros/src/tool_node/tool_task_simplex_singleline_2d.cpp b/navigator_ros/src/tool_node/tool_task_simplex_singleline_2d.cpp
index 365904b..7acc852 100644
--- a/navigator_ros/src/tool_node/tool_task_simplex_singleline_2d.cpp
+++ b/navigator_ros/src/tool_node/tool_task_simplex_singleline_2d.cpp
@@ -127,7 +127,7 @@ navigator::common::TaskSimplex2d SampleTaskSimplex(){
   // STEP Task
   out.seq = 0;
 
-  out.type = navigator::common::ETTA_BLANK; // Blank
+  out.type = navigator::common::ETTA_BACK_UP; // Blank
 
   out.id = common::UniversalRosNow();
 
object_detector 
pepperl_fuchs_r2000 
perceptron 
performer diff --git a/performer_ros/launch/performer_ros.launch b/performer_ros/launch/performer_ros.launch
index 1e28039..a3e1b72 100644
--- a/performer_ros/launch/performer_ros.launch
+++ b/performer_ros/launch/performer_ros.launch
@@ -29,8 +29,8 @@
             args="--log_dir $(arg deploy_dir)/log --minloglevel 0 --max_log_size 100">
             <remap from="/base_cmd" to="/$(arg agent_serial)/actuation/base_cmd" />
             <remap from="/stamped_base_cmd" to="/$(arg agent_serial)/actuation/stamped_base_cmd" />
-            <remap from="/charging_done" to="/$(arg agent_serial)/charging_done/bito_as"/>
-            <remap from="/charging_manager/servo_done" to="/charging_manager/servo_done/bito_sa"/>
+            <remap from="/charging_done" to="/$(arg agent_serial)/charging_done"/>
+            <remap from="/charging_manager/servo_done" to="/charging_manager/servo_done"/>
             <remap from="/error_position" to="/$(arg agent_serial)/error_position"/>
             <remap from="/finish_pallet_servo" to="/$(arg agent_serial)/finish_pallet_servo" />
             <remap from="/gloca" to="/$(arg agent_serial)/odom/filtered" />
@@ -43,8 +43,8 @@
             <remap from="/pallet_change_velocity" to="/$(arg agent_serial)/pallet_change_velocity"/>
             <remap from="/pallet_servo" to="/$(arg agent_serial)/pallet_servo" />
             <remap from="/pallet_servo_status" to="/$(arg agent_serial)/pallet_servo_status"/>
-            <remap from="/pause_pallet_servo" to="/$(arg agent_serial)/pause_pallet_servo/bito_as"/>
-            <remap from="/reset_pallet_servo" to="/$(arg agent_serial)/reset_pallet_servo/bito_as"/>
+            <remap from="/pause_pallet_servo" to="/$(arg agent_serial)/pause_pallet_servo"/>
+            <remap from="/reset_pallet_servo" to="/$(arg agent_serial)/reset_pallet_servo"/>
             <remap from="/set_emergency_stop_srv" to="/$(arg agent_serial)/set_emergency_stop_srv"/>
             <remap from="/servo_goal" to="/$(arg agent_serial)/servo_goal"/>
             <remap from="/stop_srv" to="/$(arg agent_serial)/actuation/stop_srv" />
@@ -61,7 +61,6 @@
         <arg name="repo_name" value="$(arg repo_name)"/>
         <arg name="deploy_dir" value="$(arg deploy_dir)"/>
         <arg name="data_path" value="$(arg data_path)" />
-        
         <arg name="flag_rviz_only" value="$(arg flag_rviz_only)"/> 
         <arg name="agent_serial" value="$(arg agent_serial)" />
         <arg name="robot_type" value="$(arg robot_type)"/>
diff --git a/performer_ros/param/performer_ros_diff.yaml b/performer_ros/param/performer_ros_diff.yaml
index 48f877e..b096773 100644
--- a/performer_ros/param/performer_ros_diff.yaml
+++ b/performer_ros/param/performer_ros_diff.yaml
@@ -13,9 +13,9 @@ node_servo/general/charging_frame_offset: 0.0
 #
 node_servo/general/charging_preparation_offset: 0.0
 #
-node_servo/general/use_cargo_monitor: true
+node_servo/general/use_cargo_monitor: false
 #
-node_servo/general/use_lift: true
+node_servo/general/use_lift: false
 # convergence threshold in x
 #/node_servo/node_point_control/servo_threshold_x: 0.005 # 0.005
 node_servo/node_point_control/servo_threshold_x: 0.005 # 0.005
@@ -117,13 +117,13 @@ point_control/ry_final: 5.0 #Not Applicable
 #
 point_control/ra_final: 5.0 #5.0 #fifth times
 #
-point_control/vx_upper_bound: 0.4 # 1.2
+point_control/vx_upper_bound: 0.3 # 1.2
 #
 point_control/vy_upper_bound: 0.0 #not applicable
 #
 point_control/wz_upper_bound: 0.2 # make sure wz_upper_bound is a little bit larger than reference_angular_vel.
 #
-point_control/acceleration_vx: 0.1 #0.1 #0.5 #0.012 
+point_control/acceleration_vx: 0.06 #0.1 #0.5 #0.012 
 #0.2
 point_control/acceleration_vy: 0.0 #Not applicable #0.012
 #0.2
diff --git a/performer_ros/src/function_node/node_servo_all.cpp b/performer_ros/src/function_node/node_servo_all.cpp
index e0f2e85..51e27c7 100644
--- a/performer_ros/src/function_node/node_servo_all.cpp
+++ b/performer_ros/src/function_node/node_servo_all.cpp
@@ -656,7 +656,7 @@ Work() {
           // this->options_->controller_options.kp_x *= 10;
           // this->error_threshold_.x = this->options_->controller_options.vx_upper_bound / this->options_->controller_options.kp_x;
           // this->controller_->SetOptions(this->options_->controller_options);
-          if ((fabs(diff.y)/fabs(diff.x)) > 0.2) {
+          if ((fabs(diff.y)/fabs(diff.x)) > 0.4) {
             this->PublishZeroVel();
             if (this->MoveWithDiscreteMotions() == 0) return 0;
           } else {
@@ -1125,11 +1125,11 @@ Work() {
               this->enable_detector_list_.end() || 
             this->enable_detector_list_.find("pallet_tag") !=
               this->enable_detector_list_.end() ) {
-          ret = this->ServoToPositionWithOffset(Eigen::Isometry3d::Identity(), false, true);
+          ret = this->ServoToPositionWithOffset(Eigen::Isometry3d::Identity(), false, false);
         } else if (this->pallet_servo_srv_.request.object_pose.position.z < 0.3) {
-          ret = this->ServoToPositionWithOffset(Eigen::Isometry3d::Identity(), false, true, false);
+          ret = this->ServoToPositionWithOffset(Eigen::Isometry3d::Identity(), false, false, false);
         } else {
-          ret = this->ServoToPositionWithOffset(Eigen::Isometry3d::Identity(), false, true);
+          ret = this->ServoToPositionWithOffset(Eigen::Isometry3d::Identity(), false, false);
         }
         //int ret = this->ServoToPositionWithOffset(Eigen::Isometry3d::Identity(),
         //  false, true, true, true);
@@ -1712,7 +1712,7 @@ Work() {
     std::cout << "debug 1 kp_x: " << this->options_->controller_options.kp_x << std::endl;
     this->controller_->SetOptions(this->options_->controller_options);
     if (this->ServoToPositionWithOffset(temp_offset, false, false,
-      true, false, true) == 0)
+      false, false, true) == 0)
      return 0;
 
     if (this->pallet_servo_srv_.request.command == 1) {
robot_localization diff --git a/robot_localization/test/test1.bag b/robot_localization/test/test1.bag
deleted file mode 100644
index 565f14c..0000000
Binary files a/robot_localization/test/test1.bag and /dev/null differ
diff --git a/robot_localization/test/test2.bag b/robot_localization/test/test2.bag
deleted file mode 100644
index 0559965..0000000
Binary files a/robot_localization/test/test2.bag and /dev/null differ
diff --git a/robot_localization/test/test3.bag b/robot_localization/test/test3.bag
deleted file mode 100644
index 6e139cb..0000000
Binary files a/robot_localization/test/test3.bag and /dev/null differ
sick_scan diff --git a/example_bags/2018-06-07-03-58-52.bag b/example_bags/2018-06-07-03-58-52.bag
deleted file mode 100644
index 7d16626..0000000
Binary files a/example_bags/2018-06-07-03-58-52.bag and /dev/null differ
tag_slam 
velodyne 
yugong diff --git a/yugong/data/object_model/reflectors.json b/yugong/data/object_model/reflectors.json
index db9087b..d2c6914 100644
--- a/yugong/data/object_model/reflectors.json
+++ b/yugong/data/object_model/reflectors.json
@@ -37,8 +37,8 @@
 			{
 				"id"	:	2,
 				"position"	:	{
-					"x"	:	-0.16,
-					"y"	:	15.00,
+					"x"	:	2.5,
+					"y"	:	15.28,
 					"z"	:	0
 				},
 				"normal"	:	{
diff --git a/yugong/data/robot_description/extrinsics_lidar_forklift.xacro b/yugong/data/robot_description/extrinsics_lidar_forklift.xacro
index df56813..27c75d6 100644
--- a/yugong/data/robot_description/extrinsics_lidar_forklift.xacro
+++ b/yugong/data/robot_description/extrinsics_lidar_forklift.xacro
@@ -1,9 +1,9 @@
 <?xml version="1.0"?>
 <robot name="extrinsics_lidar_forklift" xmlns:xacro="http://www.ros.org/wiki/xacro">
-  <xacro:property name="lidar_x" value="1.01435" /><!--1.01435-->
-  <xacro:property name="lidar_y" value="0.010944" />
-  <xacro:property name="lidar_z" value="2.23832" /><!--2.23832-->
-  <xacro:property name="lidar_r" value="-0.00898479" />
-  <xacro:property name="lidar_p" value="-0.0107668" />
-  <xacro:property name="lidar_w" value="3.11656" /><!--3.11656-->
+  <xacro:property name="lidar_x" value="0.988922" /><!--1.01435-->
+  <xacro:property name="lidar_y" value="0.00684829" />
+  <xacro:property name="lidar_z" value="2.26566" /><!--2.23832-->
+  <xacro:property name="lidar_r" value="0.00267743" />
+  <xacro:property name="lidar_p" value="0.00523185" />
+  <xacro:property name="lidar_w" value="3.08397" /><!--3.11656-->
 </robot>
diff --git a/yugong/launch/master_discovery.launch b/yugong/launch/master_discovery.launch
index 1640253..739905f 100644
--- a/yugong/launch/master_discovery.launch
+++ b/yugong/launch/master_discovery.launch
@@ -30,7 +30,7 @@
       <!-- in some network environments does multicast not work properly. In this
         case you can specify robots where a master discovery is running. These
         robots are pinged using unicast communication. -->
-      <rosparam param="robot_hosts">[]</rosparam>
+      <rosparam param="robot_hosts">['hx00a00018120715000n00']</rosparam>
       <!-- After the ROS master was changed the new state will be sent for
         `CHANGE_NOTIFICATION_COUNT` times (Default: 3 sec). The new state will be
         sent with `ROSMASTER_HZ` and only if `HEARTBEAT_HZ` is zero. -->
diff --git a/yugong/param/lidar_forklift.yaml b/yugong/param/lidar_forklift.yaml
index b374d15..5c8ab20 100644
--- a/yugong/param/lidar_forklift.yaml
+++ b/yugong/param/lidar_forklift.yaml
@@ -1,7 +1,7 @@
 # number of cameras
 num_cams: 1
 # brand of type of camera
-cam_type_vec: []
+cam_type_vec: ['']
 # camera serial number
 cam_serial_vec: ['17121609']
 # one of 'blue_ant', 'lidar_forklift', 'vision_forklift', 'pv_robot', 'cruiser'
@@ -13,6 +13,8 @@ trajectorizer_mode: 'bezier'
 # a combination of 'tag', 'lidar'
 localizer_type: ['lidar']
 # number of lidars
-num_lidars: 1
+num_lidars: 2
 # brand and model of lidar
-lidar_type_vec: ['velodyne@vlp16']
+lidar_type_vec: ['velodyne@vlp16','sick@tim310']
+#top, front and back lidar
+lidar_topic_name_vec: ['velodyne_points','detection_field']
diff --git a/yugong/param/lidar_forklift_special.yaml b/yugong/param/lidar_forklift_special.yaml
index ef26dc8..88949f0 100644
--- a/yugong/param/lidar_forklift_special.yaml
+++ b/yugong/param/lidar_forklift_special.yaml
@@ -1,4 +1,8 @@
 # min intensity for sick tim 561
 node_scan/scan0_min_intensity: 0
 # ip address for sick tim 561
-sick_tim_5xx/hostname: "192.168.1.10"
\ No newline at end of file
+sick_tim_5xx/hostname: "192.168.1.10"
+#charging distance
+general/charging_dist: -1.8
+# measurement_lidar, detection_lidar, none
+collision_checker/collision_sensor_type: "detection_lidar"
yugong_descriptions 

```

