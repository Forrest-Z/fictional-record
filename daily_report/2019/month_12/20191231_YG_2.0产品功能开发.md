# YG_2.0 产品功能开发



YG_2.0为内部开发代号，待功能开发完成后并入愚公1.1的产品化版本，小版本号迭代升级。



## 一，升级功能



### 运动控制

#### 1，运动控制实现麦克纳姆轮及双舵轮模型整合到愚公。(江瑜+刘会良) 1.2验收: 大疆车+汇聚(ib)+ 提供模型方案参数

车辆参数配置增加麦克纳姆论及双舵轮车型，完善chassis车型库以及Navigator运动规划器和控制器，实现在用户界面快速切换车辆模型。

#### 2，控制精度提升，航向偏差±10mm，横向偏差±20mm。(刘会良) 优化项: 1) 收敛性分析报告 2)针对电机伺服性能不好, 设计解决方案, 储备相应技术.

车辆运行中横向摆动偏差小于等于±20mm，航向到位精度小于等于±10mm，要求车辆运行平稳，轨迹任务与伺服任务切换不停顿。

#### 3，运动模型标定优化(焦健) 麦克纳姆轮的标定(1月)

在现有愚公1.0的基础上继续优化运动单舵轮模型的标定功能，简化标定步骤，优化标定辅助，提升标定的精度。

标定模块需要再增加麦克纳姆轮及双舵轮模型。

#### 4，车辆限速(中控提供信号, 需要联调)(王好)

区域限速，即在韩信端设置不同区域，例如出货区，入货区，人工作业区等，对不同区域设定最高车速，车辆运行在跨区域路网时需要根据不同区域的限速进行速度规划，实现区域限速功能。

路网限速，在非区域限速的区域，出现例如窄巷道场景，韩信下发带限速信息的轨迹时，车辆需要根据限速信息进行速度规划。

#### 5，避障图区切换(set ROI mode)(找产品经理确认一下)

不同区域不同场景不同车速避障图自动切换。（例如窄巷道，单行道，充电桩区域，原地掉头等情况）

#### 6，多传感器避障(是否应该交给感知?set ROI mode)

融合多传感器，提供参数化配置接口，实现光电开关，超声波雷达的传感器融合。

#### 7，倒车入库(已经有)

实现倒车曲线直接入库的功能，提升取货效率。要求从路网倒入库不停顿。

#### 8，绕障功能



### 感知及slam

#### 1，雷达标定优化，相机标定优化

要求实现任一工作人员，能够在使用手册及用户界面的辅助下，完成雷达及相机的自动标定，并能正常使用车辆。

#### 2，重定位辅助

slam产品化实现重定位功能，在愚公用户界面设计重定位的人机交互。（具体参考新原型图）

#### 3，托盘识别

愚公接收到新任务，去指定地点取货，到达取货点后，愚公通过检测托盘二维码，判断是否取到正确的货物，如果愚公获取的二维码与系统给定任务的托盘码不一致，则愚公将该错误信息上报给韩信，通过韩信报警反馈给操作人员取货错误。

#### 4，举升高度自适应（无货架高度自适应）

当货物立体堆叠时，通过二维码，二次确认高度，进行取货。（本功能以满足NKC项目需求为验收标准）





### 软件架构

#### 1，制定内存机制等IPC安全机制

梳理现有程序内存占用情况，挖掘可优化项，制定内存管理机制，提升系统稳定性。

8G内存的ipc上，开机及长时间运行（连续72小时），内存占用率稳定在80%以下。解决系统内存溢出的所有已知隐患。

#### 2，优化CPU占用过高

8G内存的IPC上，开机及长时间运行（连续72小时），CPU占用率稳定在80%以下，防止因CPU占用过高导致愚公卡死的现象。

#### 3，优化开机同步功能

优化愚公开机同步功能，实现开机韩信上线后，自动与韩信端时间同步，任务同步，地图同步。

#### 4，电梯模式

要求愚公能够跨楼层使用，当愚公单机进入电梯，电梯与韩信通讯，到达指定楼层后，愚公与韩信再次同步，愚公更新楼层地图，继续执行任务。

#### 5，愚公韩信单机整合

将愚公，韩信整合进同一个台IPC， 单独使用两套用户界面，在用户界面设置UI切换按钮，方便客户查看单机状态，任务状态，监控路网。



### Web界面（详见原型图）

#### 1，完善车辆配置引导界面

完善愚公1.0用户界面相关配置，增加两种车辆模型，对填写内容提示及输入范围限制进行完善，增加参数填写提示，logo自定义等功能。（具体参考新原型图）

运动控住，感知，底层硬件提取常用的需要调节的参数，输出给web组，完善参数设置。（具体参考新原型图）

#### 2，愚公韩信界面整合

将愚公韩信界面进行整合，第一阶段通过设计快速切换按钮，方便客户在愚公及韩信端进行切换，第二阶段将韩信的路网设计及路网监控等功能整合到愚公的用户界面。

#### 3，呼叫盒与韩信api对接

呼叫盒与韩信API对接，实现通过呼叫盒，一键触发指定车辆的指定任务。





## 二，输出文件

### 1，产品手册

### 2，接口文件
#### a) 运动控制输出标准接口和测试用例给到FAE
#### b) 中控输出BMS+充电机交握标准接口和测试用例给到FAE
#### c) Web输出标准任务接口给到FAE
#### d) 感知输出标准接口、测试项、以及操作手册给到FAE



### 3, 方案1愚公与韩信联合测试




















