# 20191106 daily report

| 填写人 | 日期      | OKR（一级） | OKR（二级） | 任务描述                                                     | 预计工时 h | issue号 | 积分申请 | 进度 | 存在问题/需要协助 |
| ------ | --------- | ----------- | ----------- | ------------------------------------------------------------ | ---------- | ------- | -------- | ---- | ----------------- |
| 焦健   | 2019/11/8 | 项目支持    | 差动轮项目  | 1.测试记录每项花费时间。（checkTrajectory和replan内部），并估算理想的replan花费时间。 2.梳理index处理机制。减少后退的行为。 3.梳理replan过程中的轨迹拼接的问题。 4.发现CPU占用率过高的问题，通过减少tj dsec，降低了CPU占用率到平均60%左右，但是在replan的过程中还是有CPU占用率很高的情况，需要继续排查 | 8          |         |          |      |                   |
|        |           |             |             |                                                              |            |         |          |      |                   |

## 1. 测试记录每项花费时间

（checkTrajectory和replan内部）并估算理想的replan花费时间。

### replanFunction time:

LPP-HandleReplan:

1)

```
I1108 20:14:27.010241  6648 node_local_plan_pipe_threaded.cpp:1960] LPP-HandleReplan Thread-1 Replan needed and triggered! 

I1108 20:14:27.545929  6664 node_local_plan_pipe_threaded.cpp:1966] LPP-HandleReplan ReplanFunction finished
```

2)

```
I1108 20:14:27.999250  6648 node_local_plan_pipe_threaded.cpp:1960] LPP-HandleReplan Thread-1 Replan needed and triggered! 
I1108 20:14:28.613488  6664 node_local_plan_pipe_threaded.cpp:1966] LPP-HandleReplan ReplanFunction finished
```

3)

```
I1108 20:14:29.387312  6648 node_local_plan_pipe_threaded.cpp:1960] LPP-HandleReplan Thread-1 Replan needed and triggered! 
I1108 20:14:30.051851  6664 node_local_plan_pipe_threaded.cpp:1966] LPP-HandleReplan ReplanFunction finished
```

replan time can only spend less than 0.7s.



## 2. 梳理index处理机制。减少后退的行为。

index关系：

当前的index读取 local_plan_pipe_state_->current_index，local_plan_pipe_state_->path_index

trajectory_path_index_pairs_：

|      | first | second |
| ---- | ----- | ------ |
|      |       |        |
|      |       |        |
|      |       |        |



## 3.梳理replan过程中的轨迹拼接的问题



## 4.发现CPU占用率过高的问题

通过提高车的速度，降低tj_dsec，使得trajectory points size变小，降低了CPU占用率。后续可能的解决方法：修改预测的步数。

  

bodyStop还有个问题。。